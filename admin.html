<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>INTROVERT Admin - 2026 Liquid UI</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:wght@700&family=Noto+Sans+Myanmar:wght@300;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.04);
            --glass-border: rgba(255, 255, 255, 0.15);
            --accent: #E6BE8A;
            --danger: #ff453a;
            --success: #2ecc71;
            --ios-blur: blur(25px);
            --liquid-ease: cubic-bezier(0.23, 1, 0.32, 1);
        }

        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; outline: none; }

        body {
            margin: 0; padding: 0; background: #000;
            color: #fff; font-family: 'Inter', 'Noto Sans Myanmar', sans-serif;
            overflow-x: hidden;
        }

        /* Liquid Pill Noti */
        #liquidNoti {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            z-index: 10000; padding: 14px 35px; border-radius: 50px;
            background: rgba(255, 255, 255, 0.1); backdrop-filter: var(--ios-blur);
            border: 1px solid var(--glass-border); transition: 0.7s var(--liquid-ease);
            font-size: 14px; box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }
        #liquidNoti.show { top: 30px; }

        /* Login Section */
        #authSection {
            height: 100vh; display: flex; align-items: center; justify-content: center;
        }
        .auth-card {
            background: var(--glass); padding: 50px 30px; border-radius: 40px;
            border: 1px solid var(--glass-border); backdrop-filter: var(--ios-blur);
            text-align: center; width: 90%; max-width: 380px;
        }

        /* Admin Layout */
        #adminPanel { display: none; padding: 40px 20px; }
        .container { max-width: 600px; margin: 0 auto; }

        .glass-card {
            background: var(--glass); border: 1px solid var(--glass-border);
            border-radius: 35px; padding: 30px; backdrop-filter: var(--ios-blur);
            margin-bottom: 30px;
        }

        h2, h3 { font-family: 'Playfair Display', serif; letter-spacing: 2px; color: var(--accent); }

        input, textarea {
            width: 100%; padding: 16px; margin-bottom: 12px; border-radius: 18px;
            background: rgba(255,255,255,0.05); border: 1px solid var(--glass-border);
            color: #fff; font-size: 14px; transition: 0.3s;
        }
        input:focus, textarea:focus { border-color: var(--accent); background: rgba(255,255,255,0.1); }

        .img-input-grid { display: grid; grid-template-columns: repeat(1, 1fr); gap: 10px; margin: 15px 0; }

        .btn {
            width: 100%; padding: 18px; border-radius: 20px; border: none;
            font-weight: 600; cursor: pointer; transition: 0.3s; margin-top: 10px;
        }
        .btn-add { background: #fff; color: #000; }
        .btn-add:hover { transform: scale(1.02); }
        .btn-del { background: rgba(255, 69, 58, 0.1); color: var(--danger); border: 1px solid rgba(255, 69, 58, 0.2); margin-top: 20px; }
        .btn-save { background: var(--success); color: #fff; }

        /* Flash Sale Admin Styles */
        .flash-sale-admin {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
            padding: 25px;
            margin-top: 30px;
            margin-bottom: 30px;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            margin-right: 10px;
            vertical-align: middle;
        }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #333; transition: .4s; border-radius: 34px;
        }
        input:checked + .slider { background-color: var(--success); }
        .status-text {
            vertical-align: middle;
            font-size: 14px;
        }
        .sale-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        /* Inventory List UI */
        .inventory-item {
            display: flex; align-items: center; gap: 15px; padding: 15px;
            background: rgba(255,255,255,0.03); border-radius: 20px; margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .inventory-item img { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; }
        .item-info { flex: 1; }
        .item-info b { display: block; font-size: 15px; }
        .item-info span { font-size: 12px; opacity: 0.6; }

        .delete-btn {
            background: none; border: none; color: var(--danger); 
            cursor: pointer; font-size: 18px; padding: 10px;
        }
    </style>
</head>
<body>

    <div id="liquidNoti"></div>

    <div id="authSection">
        <div class="auth-card">
            <h2 style="color: #fff; margin-bottom: 10px;">INTROVERT</h2>
            <p style="opacity: 0.5; font-size: 13px; margin-bottom: 30px;">Security Access Required</p>
            <input type="password" id="passInput" placeholder="Password ·ÄÄ·Ä≠·ÄØ ·Äõ·Ä≠·ÄØ·ÄÄ·Ä∫·Äë·Ää·Ä∑·Ä∫·Äï·Ä´" style="text-align: center;">
            <button class="btn btn-add" onclick="checkAuth()">Access Panel</button>
        </div>
    </div>

    <div id="adminPanel">
        <div class="container">
            <div class="glass-card">
                <h3>ADD NEW PRODUCT</h3>
                <input type="text" id="pName" placeholder="·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·Ä°·Äô·Ää·Ä∫ (·Ä•·Äï·Äô·Ä¨ - Xiaomi 14 Pro Case)">
                <input type="number" id="pPrice" placeholder="·Äà·Ä±·Ä∏·Äî·Äæ·ÄØ·Äî·Ä∫·Ä∏ (·ÄÄ·Äª·Äï·Ä∫)">
                <input type="number" id="pStock" placeholder="·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫·Ä°·Äõ·Ä±·Ä°·Äê·ÄΩ·ÄÄ·Ä∫">
                
                <div style="font-size: 12px; opacity: 0.5; margin: 15px 0 5px 5px;">Image Links (Direct URL)</div>
                <div class="img-input-grid">
                    <input type="text" class="img-link" placeholder="Image URL 1 (Cover)">
                    <input type="text" class="img-link" placeholder="Image URL 2">
                    <input type="text" class="img-link" placeholder="Image URL 3">
                    <input type="text" class="img-link" placeholder="Image URL 4">
                    <input type="text" class="img-link" placeholder="Image URL 5">
                </div>
                
                <button class="btn btn-add" onclick="addProduct()">Add to Inventory</button>
            </div>

            <!-- Flash Sale Admin Section -->
            <div class="flash-sale-admin">
                <h3>‚ö° Flash Sale Settings</h3>
                <div class="sale-header">
                    <label class="switch">
                        <input type="checkbox" id="saleToggle" onchange="updateSaleStatus()">
                        <span class="slider"></span>
                    </label>
                    <span class="status-text" id="saleStatusText">Sale Status (·Äï·Ä≠·Äê·Ä∫/·Äñ·ÄΩ·ÄÑ·Ä∑·Ä∫)</span>
                </div>
                
                <input type="text" id="promoText" placeholder="Promotion ·ÄÖ·Ä¨·Äû·Ä¨·Ä∏ (·Ä•·Äï·Äô·Ä¨- Summer Sale 50%)" style="margin-top:15px;">
                
                <div style="font-size: 12px; opacity: 0.5; margin: 10px 0 5px 5px;">·Äû·ÄÄ·Ä∫·Äê·Äô·Ä∫·Ä∏·ÄÄ·ÄØ·Äî·Ä∫·ÄÜ·ÄØ·Ä∂·Ä∏·Äô·Ää·Ä∑·Ä∫·Äõ·ÄÄ·Ä∫·Äî·Äæ·ÄÑ·Ä∑·Ä∫·Ä°·ÄÅ·Äª·Ä≠·Äî·Ä∫</div>
                <input type="datetime-local" id="endTime" style="margin-top:5px;">
                
                <button class="btn btn-save" onclick="saveSaleSettings()" style="margin-top:20px;">üíæ Save Flash Sale Settings</button>
            </div>

            <div class="glass-card">
                <h3 style="margin-bottom: 20px;">CURRENT INVENTORY</h3>
                <div id="inventoryList">
                    <p style="text-align: center; opacity: 0.3;">Loading Data...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCVRV8EGOdsjqAVHeSYO-Qesovdvg0LbbM",
            authDomain: "introvert-case-shop.firebaseapp.com",
            databaseURL: "https://introvert-case-shop-default-rtdb.firebaseio.com",
            projectId: "introvert-case-shop",
            storageBucket: "introvert-case-shop.firebasestorage.app",
            messagingSenderId: "531673000312",
            appId: "1:531673000312:web:2a8d5fa0674a5b43af008d",
            measurementId: "G-W7RCY4F27V"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Utility Functions
        function showNoti(m) {
            const n = document.getElementById('liquidNoti');
            n.innerText = m; 
            n.classList.add('show');
            setTimeout(() => n.classList.remove('show'), 3000);
        }

        function formatDateTimeForInput(timestamp) {
            if (!timestamp) return '';
            const date = new Date(timestamp);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${year}-${month}-${day}T${hours}:${minutes}`;
        }

        // Password Check
        function checkAuth() {
            const pass = document.getElementById('passInput').value;
            if(pass === '261521011') {
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadInventory();
                loadFlashSaleSettings();
            } else {
                showNoti("Password ·Äô·Äæ·Ä¨·Ä∏·Äö·ÄΩ·ÄÑ·Ä∫·Ä∏·Äî·Ä±·Äï·Ä´·Äû·Ää·Ä∫·Äõ·Äæ·ÄÑ·Ä∫");
            }
        }

        // Add Product Logic
        async function addProduct() {
            const name = document.getElementById('pName').value.trim();
            const price = document.getElementById('pPrice').value;
            const stock = document.getElementById('pStock').value;
            const imgInputs = document.querySelectorAll('.img-link');
            let images = [];
            
            imgInputs.forEach(input => {
                if(input.value.trim() !== "") images.push(input.value.trim());
            });

            if(!name || !price || !stock || images.length === 0) {
                showNoti("·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·Äô·Äª·Ä¨·Ä∏·ÄÄ·Ä≠·ÄØ ·Ä°·Äï·Äº·Ää·Ä∑·Ä∫·Ä°·ÄÖ·ÄØ·Ä∂ ·Äñ·Äº·Ää·Ä∑·Ä∫·Äï·Ä±·Ä∏·Äï·Ä´·Äõ·Äæ·ÄÑ·Ä∫");
                return;
            }

            const productId = name.toLowerCase().replace(/[^a-z0-9]/g, "_") + "_" + Date.now();
            
            try {
                await db.ref('inventory/' + productId).set({
                    id: productId,
                    name: name,
                    price: parseInt(price),
                    stock: parseInt(stock),
                    images: images,
                    timestamp: Date.now()
                });
                showNoti("·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·Ä°·Äû·ÄÖ·Ä∫ ·Äë·Ää·Ä∑·Ä∫·Äû·ÄΩ·ÄÑ·Ä∫·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ·Äõ·Äæ·ÄÑ·Ä∫ ‚ú®");
                
                // Clear Form
                document.getElementById('pName').value = "";
                document.getElementById('pPrice').value = "";
                document.getElementById('pStock').value = "";
                imgInputs.forEach(i => i.value = "");
            } catch (e) {
                showNoti("Error: " + e.message);
            }
        }

        // Load Inventory List
        function loadInventory() {
            db.ref('inventory').on('value', (snapshot) => {
                const data = snapshot.val();
                const listDiv = document.getElementById('inventoryList');
                listDiv.innerHTML = "";

                if(!data) {
                    listDiv.innerHTML = `<p style="text-align: center; opacity: 0.3;">·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏ ·Äô·Äõ·Äæ·Ä≠·Äû·Ä±·Ä∏·Äï·Ä´</p>`;
                    return;
                }

                // Convert to array and sort by timestamp (newest first)
                const products = Object.entries(data).map(([id, p]) => ({ id, ...p }));
                products.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));

                products.forEach(p => {
                    listDiv.innerHTML += `
                        <div class="inventory-item">
                            <img src="${p.images ? p.images[0] : 'https://via.placeholder.com/150'}" 
                                 onerror="this.src='https://via.placeholder.com/150'">
                            <div class="item-info">
                                <b>${p.name || 'Unknown'}</b>
                                <span>${p.price?.toLocaleString() || 0} ·ÄÄ·Äª·Äï·Ä∫ | Stock: ${p.stock || 0} ·ÄÅ·ÄØ</span>
                            </div>
                            <button class="delete-btn" onclick="deleteProduct('${p.id}')">‚úï</button>
                        </div>
                    `;
                });
            });
        }

        // Delete Product
        async function deleteProduct(id) {
            if(confirm("·Äí·ÄÆ·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Äñ·Äª·ÄÄ·Ä∫·Äô·Äæ·Ä¨ ·Äû·Ä±·ÄÅ·Äª·Ä¨·Äï·Ä´·Äû·Äú·Ä¨·Ä∏·Äõ·Äæ·ÄÑ·Ä∫?")) {
                try {
                    await db.ref('inventory/' + id).remove();
                    showNoti("·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Äñ·Äª·ÄÄ·Ä∫·Äú·Ä≠·ÄØ·ÄÄ·Ä∫·Äï·Ä´·Äï·Äº·ÄÆ");
                } catch (e) {
                    showNoti("Error: " + e.message);
                }
            }
        }

        // Flash Sale Functions
        function updateSaleStatus() {
            const isActive = document.getElementById('saleToggle').checked;
            const statusText = document.getElementById('saleStatusText');
            statusText.innerHTML = isActive ? '‚ö° Flash Sale ·Äñ·ÄΩ·ÄÑ·Ä∑·Ä∫·Äë·Ä¨·Ä∏·Äû·Ää·Ä∫' : 'üí§ Flash Sale ·Äï·Ä≠·Äê·Ä∫·Äë·Ä¨·Ä∏·Äû·Ää·Ä∫';
        }

        async function saveSaleSettings() {
            const active = document.getElementById('saleToggle').checked;
            const text = document.getElementById('promoText').value.trim();
            const time = document.getElementById('endTime').value;
            
            if (!text) {
                showNoti("Promotion ·ÄÖ·Ä¨·Äû·Ä¨·Ä∏ ·Äë·Ää·Ä∑·Ä∫·Äï·Ä±·Ä∏·Äï·Ä´·Äõ·Äæ·ÄÑ·Ä∫");
                return;
            }

            if (!time) {
                showNoti("·Äû·ÄÄ·Ä∫·Äê·Äô·Ä∫·Ä∏·ÄÄ·ÄØ·Äî·Ä∫·ÄÜ·ÄØ·Ä∂·Ä∏·Äô·Ää·Ä∑·Ä∫·Äõ·ÄÄ·Ä∫ ·Äõ·ÄΩ·Ä±·Ä∏·Äï·Ä±·Ä∏·Äï·Ä´·Äõ·Äæ·ÄÑ·Ä∫");
                return;
            }

            try {
                await db.ref('flashSaleSettings').set({
                    isActive: active,
                    promoText: text,
                    endTime: time,
                    updatedAt: Date.now()
                });
                showNoti("‚úÖ Flash Sale Settings ·Äû·Ä≠·Äô·Ä∫·Ä∏·ÄÜ·Ää·Ä∫·Ä∏·Äï·Äº·ÄÆ·Ä∏·Äï·Ä´·Äï·Äº·ÄÆ");
            } catch (e) {
                showNoti("Error: " + e.message);
            }
        }

        function loadFlashSaleSettings() {
            db.ref('flashSaleSettings').on('value', (snapshot) => {
                const data = snapshot.val();
                if(data) {
                    document.getElementById('saleToggle').checked = data.isActive || false;
                    document.getElementById('promoText').value = data.promoText || '';
                    document.getElementById('endTime').value = data.endTime || '';
                    updateSaleStatus();
                } else {
                    // Default values
                    document.getElementById('saleToggle').checked = false;
                    document.getElementById('promoText').value = '';
                    document.getElementById('endTime').value = '';
                    updateSaleStatus();
                }
            });
        }

        // Make functions globally available
        window.checkAuth = checkAuth;
        window.addProduct = addProduct;
        window.deleteProduct = deleteProduct;
        window.saveSaleSettings = saveSaleSettings;
        window.updateSaleStatus = updateSaleStatus;
    </script>
</body>
</html>
