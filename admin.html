<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>INTROVERT - Admin Panel 2026</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Noto+Sans+Myanmar:wght@300;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.15);
            --accent: #E6BE8A;
            --liquid-ease: cubic-bezier(0.23, 1, 0.32, 1);
        }

        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; outline: none; }

        body {
            margin: 0; background: #000; color: #fff;
            font-family: 'Inter', 'Noto Sans Myanmar', sans-serif;
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
            background-image: radial-gradient(circle at 50% -20%, #1a1a1a, #000);
        }

        /* Liquid Pill Noti */
        #noti {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            padding: 14px 30px; border-radius: 50px; background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(20px); border: 1px solid var(--glass-border);
            transition: 0.6s var(--liquid-ease); z-index: 10000; font-size: 14px;
        }

        /* Login UI */
        #loginOverlay {
            background: var(--glass); backdrop-filter: blur(25px);
            padding: 40px; border-radius: 40px; border: 1px solid var(--glass-border);
            text-align: center; width: 90%; max-width: 400px;
        }

        /* Admin Main UI */
        #adminContainer { display: none; width: 95%; max-width: 900px; margin: 40px 0; }
        .card {
            background: var(--glass); backdrop-filter: blur(20px);
            padding: 30px; border-radius: 40px; border: 1px solid var(--glass-border);
            margin-bottom: 25px;
        }

        input, select {
            width: 100%; padding: 15px; border-radius: 18px; border: 1px solid var(--glass-border);
            background: rgba(255,255,255,0.05); color: #fff; margin-bottom: 15px;
        }

        .image-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 20px; }
        .img-slot {
            aspect-ratio: 1/1; background: rgba(255,255,255,0.05); border: 2px dashed var(--glass-border);
            border-radius: 15px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; position: relative; overflow: hidden;
        }
        .img-slot img { width: 100%; height: 100%; object-fit: cover; }
        .del-img { 
            position: absolute; top: 2px; right: 2px; background: rgba(255,69,58,0.8); 
            border: none; color: white; border-radius: 50%; width: 20px; height: 20px; 
            font-size: 10px; cursor: pointer; display: none;
        }

        .btn {
            background: #fff; color: #000; padding: 16px; width: 100%;
            border-radius: 18px; border: none; font-weight: 600; cursor: pointer;
            transition: 0.3s var(--liquid-ease);
        }
        .btn:active { transform: scale(0.96); }
        .btn-add { background: var(--accent); margin-bottom: 20px; }
        
        .product-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px; border-bottom: 1px solid var(--glass-border);
        }
    </style>
</head>
<body>

    <div id="noti"></div>

    <div id="loginOverlay">
        <h2 style="margin-top:0; letter-spacing: 2px;">ADMIN ACCESS</h2>
        <input type="password" id="passInput" placeholder="Password ရိုက်ထည့်ပါ">
        <button class="btn" onclick="checkAuth()">Login ဝင်မည်</button>
    </div>

    <div id="adminContainer">
        <h1 style="text-align: center; color: var(--accent); letter-spacing: 4px;">INVENTORY</h1>

        <div class="card">
            <h3 style="margin-top:0">ပစ္စည်းအသစ်ထည့်ရန်</h3>
            <input type="text" id="newModel" placeholder="Model အမည် (ဥပမာ - Xiaomi 17 Ultra)">
            <input type="number" id="newPrice" placeholder="ဈေးနှုန်း (ကျပ်)">
            <input type="number" id="newStock" placeholder="လက်ကျန်အရေအတွက်">
            
            <p style="font-size: 12px; opacity: 0.6;">ပုံ ၅ ပုံ (Image URLs)</p>
            <div class="image-grid">
                <div class="img-slot" onclick="uploadImg(0)"><span id="p0">+</span><img id="i0"><button class="del-img" id="d0" onclick="removeImg(event,0)">✕</button></div>
                <div class="img-slot" onclick="uploadImg(1)"><span id="p1">+</span><img id="i1"><button class="del-img" id="d1" onclick="removeImg(event,1)">✕</button></div>
                <div class="img-slot" onclick="uploadImg(2)"><span id="p2">+</span><img id="i2"><button class="del-img" id="d2" onclick="removeImg(event,2)">✕</button></div>
                <div class="img-slot" onclick="uploadImg(3)"><span id="p3">+</span><img id="i3"><button class="del-img" id="d3" onclick="removeImg(event,3)">✕</button></div>
                <div class="img-slot" onclick="uploadImg(4)"><span id="p4">+</span><img id="i4"><button class="del-img" id="d4" onclick="removeImg(event,4)">✕</button></div>
            </div>
            <button class="btn btn-add" onclick="addNewProduct()">ပစ္စည်းအသစ် သိမ်းမည်</button>
        </div>

        <div id="productList"></div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCVRV8EGOdsjqAVHeSYO-Qesovdvg0LbbM",
            authDomain: "introvert-case-shop.firebaseapp.com",
            databaseURL: "https://introvert-case-shop-default-rtdb.firebaseio.com",
            projectId: "introvert-case-shop",
            storageBucket: "introvert-case-shop.firebasestorage.app",
            messagingSenderId: "531673000312",
            appId: "1:531673000312:web:2a8d5fa0674a5b43af008d"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let tempImages = ["", "", "", "", ""];

        function showNoti(msg) {
            const n = document.getElementById('noti');
            n.innerText = msg; n.style.top = '30px';
            setTimeout(() => n.style.top = '-100px', 3000);
        }

        function checkAuth() {
            if(document.getElementById('passInput').value === '261521011') {
                document.getElementById('loginOverlay').style.display = 'none';
                document.getElementById('adminContainer').style.display = 'block';
                fetchProducts();
            } else {
                showNoti("Password မှားယွင်းနေပါတယ်ရှင်");
            }
        }

        function uploadImg(index) {
            const url = prompt("ပုံ URL (Direct Link) ထည့်ပေးပါရှင်:");
            if(url) {
                tempImages[index] = url;
                document.getElementById(`i${index}`).src = url;
                document.getElementById(`p${index}`).style.display = 'none';
                document.getElementById(`d${index}`).style.display = 'block';
            }
        }

        function removeImg(e, index) {
            e.stopPropagation();
            tempImages[index] = "";
            document.getElementById(`i${index}`).src = "";
            document.getElementById(`p${index}`).style.display = 'block';
            document.getElementById(`d${index}`).style.display = 'none';
        }

        function addNewProduct() {
            const model = document.getElementById('newModel').value.trim();
            const price = document.getElementById('newPrice').value;
            const stock = document.getElementById('newStock').value;

            if(!model || !price || !stock) return showNoti("အချက်အလက် အားလုံးဖြည့်ပေးပါရှင်");

            const dbId = model.replace(/\s+/g, '_').toLowerCase();
            db.ref('inventory/' + dbId).set({
                name: model,
                price: parseInt(price),
                stock: parseInt(stock),
                images: tempImages
            }).then(() => {
                showNoti("ပစ္စည်းအသစ် ထည့်သွင်းပြီးပါပြီရှင်");
                resetForm();
            });
        }

        function resetForm() {
            document.getElementById('newModel').value = "";
            document.getElementById('newPrice').value = "";
            document.getElementById('newStock').value = "";
            tempImages = ["", "", "", "", ""];
            for(let i=0; i<5; i++) {
                document.getElementById(`i${i}`).src = "";
                document.getElementById(`p${i}`).style.display = 'block';
                document.getElementById(`d${i}`).style.display = 'none';
            }
        }

        function fetchProducts() {
            db.ref('inventory').on('value', (snap) => {
                const data = snap.val();
                const listDiv = document.getElementById('productList');
                listDiv.innerHTML = "<h3>လက်ရှိပစ္စည်းများ စီမံရန်</h3>";
                for(let id in data) {
                    const p = data[id];
                    listDiv.innerHTML += `
                        <div class="card">
                            <div style="display:flex; justify:space-between; align-items:center; margin-bottom:15px;">
                                <strong style="color:var(--accent)">${p.name}</strong>
                                <button onclick="deleteProduct('${id}')" style="background:none; border:none; color:#ff453a; cursor:pointer;">Delete</button>
                            </div>
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
                                <input type="number" value="${p.price}" onchange="updateValue('${id}', 'price', this.value)" placeholder="Price">
                                <input type="number" value="${p.stock}" onchange="updateValue('${id}', 'stock', this.value)" placeholder="Stock">
                            </div>
                            <p style="font-size:11px; opacity:0.5;">* တန်ဖိုးများကို ပြောင်းလိုက်သည်နှင့် Customer ဘက်တွင် ချက်ချင်း Update ဖြစ်ပါမည်။</p>
                        </div>
                    `;
                }
            });
        }

        function updateValue(id, field, value) {
            db.ref('inventory/' + id).update({ [field]: parseInt(value) })
              .then(() => showNoti("Update အောင်မြင်ပါတယ်ရှင်"));
        }

        function deleteProduct(id) {
            if(confirm("ဒီပစ္စည်းကို ဖျက်မှာ သေချာပါသလားရှင်?")) {
                db.ref('inventory/' + id).remove().then(() => showNoti("ဖျက်ပြီးပါပြီရှင်"));
            }
        }
    </script>
</body>
</html>
