<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introvert Mobile Shop</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background-color: #eff0f5; margin: 0; padding: 0; }
        .header { background: #f57224; color: white; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 100; }
        .container { padding: 12px; max-width: 500px; margin: auto; }
        .card { background: white; border-radius: 8px; overflow: hidden; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .card img { width: 100%; display: block; height: 300px; object-fit: contain; background: #fff; }
        .info { padding: 15px; }
        .price { font-size: 22px; color: #f57224; font-weight: bold; }
        .stock-label { font-size: 13px; margin-top: 5px; padding: 4px 8px; border-radius: 4px; display: inline-block; }
        .in-stock { background: #e8f8f0; color: #2ecc71; }
        .out-of-stock { background: #fdeaea; color: #e74c3c; }
        .buy-btn { background: #f57224; color: white; border: none; padding: 12px; width: 100%; border-radius: 4px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .buy-btn:disabled { background: #ccc; }
        input { width: 100%; padding: 10px; margin: 5px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
    </style>
</head>
<body>

<div class="header"><h1>Introvert Shop</h1></div>

<div class="container">
    <div class="card">
        <img src="https://via.placeholder.com/500x500?text=Xiaomi+Case" alt="Xiaomi Case">
        <div class="info">
            <div class="price">15,000 MMK</div>
            <div id="status1" class="stock-label">Loading...</div>
            <h3>Xiaomi Premium Soft Case</h3>
            <input type="text" id="n1" placeholder="·Äû·ÄÑ·Ä∑·Ä∫·Ä°·Äô·Ää·Ä∫">
            <input type="number" id="p1" placeholder="·Äñ·ÄØ·Äî·Ä∫·Ä∏·Äî·Ä∂·Äï·Ä´·Äê·Ä∫">
            <button id="btn1" class="buy-btn" onclick="order('xiaomi')">·Ä°·ÄÅ·ÄØ·Äï·Ä≤ ·Äù·Äö·Ä∫·Äö·Ä∞·Äô·Ää·Ä∫</button>
        </div>
    </div>

    <div class="card">
        <img src="https://i.postimg.cc/VkcFsfvh/1767012089377.png" alt="Redmi Turbo 4 Pro">
        <div class="info">
            <div class="price">9,900 MMK</div>
            <div id="status2" class="stock-label">Loading...</div>
            <h3>Redmi Turbo 4 Pro (White Color)</h3>
            <input type="text" id="n2" placeholder="·Äû·ÄÑ·Ä∑·Ä∫·Ä°·Äô·Ää·Ä∫">
            <input type="number" id="p2" placeholder="·Äñ·ÄØ·Äî·Ä∫·Ä∏·Äî·Ä∂·Äï·Ä´·Äê·Ä∫">
            <button id="btn2" class="buy-btn" onclick="order('redmi')">·Ä°·ÄÅ·ÄØ·Äï·Ä≤ ·Äù·Äö·Ä∫·Äö·Ä∞·Äô·Ää·Ä∫</button>
        </div>
    </div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyCVRV8EGOdsjqAVHeSYO-Qesovdvg0LbbM",
        authDomain: "introvert-case-shop.firebaseapp.com",
        databaseURL: "https://introvert-case-shop-default-rtdb.firebaseio.com",
        projectId: "introvert-case-shop",
        storageBucket: "introvert-case-shop.firebasestorage.app",
        messagingSenderId: "531673000312",
        appId: "1:531673000312:web:2a8d5fa0674a5b43af008d"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Stock ·Äñ·Äê·Ä∫·Äõ·Äî·Ä∫
    function syncStock(path, labelId, btnId) {
        db.ref(path).on('value', (s) => {
            const count = s.val() || 0;
            document.getElementById(labelId).innerText = count > 0 ? "·Äú·ÄÄ·Ä∫·ÄÄ·Äª·Äî·Ä∫: " + count : "·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·Äï·Äº·Äê·Ä∫·Äï·Äº·ÄÆ";
            document.getElementById(labelId).className = count > 0 ? "stock-label in-stock" : "stock-label out-of-stock";
            document.getElementById(btnId).disabled = count <= 0;
        });
    }
    syncStock('stock_xiaomi', 'status1', 'btn1');
    syncStock('stock_redmi', 'status2', 'btn2');

    function order(item) {
        let n = (item === 'xiaomi') ? document.getElementById('n1').value : document.getElementById('n2').value;
        let p = (item === 'xiaomi') ? document.getElementById('p1').value : document.getElementById('p2').value;
        let path = (item === 'xiaomi') ? 'stock_xiaomi' : 'stock_redmi';
        let name = (item === 'xiaomi') ? 'Xiaomi Case' : 'Redmi Turbo 4 Pro';

        if(!n || !p) return alert("·Ä°·ÄÅ·Äª·ÄÄ·Ä∫·Ä°·Äú·ÄÄ·Ä∫·Äñ·Äº·Ää·Ä∑·Ä∫·Äï·Ä´");

        db.ref(path).transaction(c => (c || 0) - 1).then(() => {
            window.location.href = `https://t.me/samuelmmc?text=üõí **·Ä°·Ä±·Ä¨·Ä∫·Äí·Ä´·Äû·ÄÖ·Ä∫**%0A·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏: ${name}%0A·Ä°·Äô·Ää·Ä∫: ${n}%0A·Äñ·ÄØ·Äî·Ä∫·Ä∏: ${p}`;
        });
    }
</script>
</body>
</html>
